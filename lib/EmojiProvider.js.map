{"version":3,"sources":["../src/EmojiProvider.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","exports","EmojiProvider","fs","require","path","fuzzaldrin","constructor","wordRegex","properties","keys","loadProperties","readFile","resolve","__dirname","error","content","JSON","parse","getSuggestions","editor","replacementPrefix","prefix","getPrefix","length","Number","charAt","slice","unicodeEmojis","getUnicodeEmojiSuggestions","cm","cursor","getCursor","token","getTokenAt","currentWord","string","regexMatch","match","words","filter","Array","from","map","word","text","emoji","rightLabel"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmojiProvider = void 0;\nconst fs = __importStar(require(\"fs\"));\nconst path = __importStar(require(\"path\"));\nconst fuzzaldrin = __importStar(require(\"fuzzaldrin\"));\nclass EmojiProvider {\n    constructor() {\n        this.wordRegex = /::?[\\w\\d_\\+-]+$/;\n        this.properties = {};\n        this.keys = [];\n    }\n    loadProperties() {\n        return fs.readFile(path.resolve(__dirname, '..', 'properties.json'), (error, content) => {\n            if (error) {\n                return;\n            }\n            this.properties = JSON.parse(content);\n            return this.keys = Object.keys(this.properties);\n        });\n    }\n    ;\n    getSuggestions(editor) {\n        let replacementPrefix;\n        let prefix = this.getPrefix(editor);\n        if (!((prefix != null ? prefix.length : Number) >= 2)) {\n            return [];\n        }\n        ;\n        if (prefix.charAt(1) === ':') {\n            replacementPrefix = prefix;\n            prefix = prefix.slice(1);\n        }\n        const unicodeEmojis = this.getUnicodeEmojiSuggestions(prefix);\n        return unicodeEmojis;\n    }\n    ;\n    getPrefix(cm) {\n        const cursor = cm.getCursor();\n        const token = cm.getTokenAt(cursor, true);\n        const currentWord = `:${token.string}`; //prepend ':'\n        const regexMatch = currentWord.match(this.wordRegex);\n        const match = regexMatch ? regexMatch[0] : ':';\n        return match;\n    }\n    ;\n    getUnicodeEmojiSuggestions(prefix) {\n        const words = fuzzaldrin.filter(this.keys, prefix.slice(1));\n        return Array.from(words).map((word) => ({\n            text: this.properties[word].emoji,\n            replacementPrefix: prefix,\n            rightLabel: word\n        }));\n    }\n    ;\n}\nexports.EmojiProvider = EmojiProvider;\n"],"file":"EmojiProvider.js"}